# -*- encoding:utf-8 -*-
from mako import runtime, filters, cache
UNDEFINED = runtime.UNDEFINED
__M_dict_builtin = dict
__M_locals_builtin = locals
_magic_number = 6
_modified_time = 1346658441.52616
_template_filename='/data/xce/pylons-dev/feedadmin-test/feedadmin/templates/feed-list.mako'
_template_uri='/feed-list.mako'
_template_cache=cache.Cache(__name__, _modified_time)
_source_encoding='utf-8'
from webhelpers.html import escape
_exports = []


def render_body(context,**pageargs):
    context.caller_stack._push_frame()
    try:
        __M_locals = __M_dict_builtin(pageargs=pageargs)
        user_right = context.get('user_right', UNDEFINED)
        list_filter = context.get('list_filter', UNDEFINED)
        __M_writer = context.writer()
        # SOURCE LINE 1
        __M_writer(u'<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">\n<html id="designdetector-com" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n<link href="/css/new-style.css" rel="stylesheet" type="text/css"></link>\n<script src="/jquery.js" type="text/javascript"></script>\n<script type="text/javascript">\nvar g_user_right = ')
        # SOURCE LINE 8
        __M_writer(escape(user_right))
        __M_writer(u';\nvar g_list_filter = ')
        # SOURCE LINE 9
        __M_writer(escape(list_filter))
        __M_writer(u';\nif (g_user_right <= 0) {\n  var f = window.location.href;\n  window.location = \'https://passport.no.opi-corp.com/login.php?forward=\' + escape(f);\n}\n</script>\n<script src="/feed-admin.js" type="text/javascript"></script>\n<title>\u65b0\u9c9c\u4e8b\u7c7b\u578b\u5217\u8868</title>\n</head>\n<body>\n<div class="alignCenter">\n<div class="admin-only hidden">\n  <table width="1200" border="1" class="t1">\n    <tr>\n      <th align="left"><a href="/feed-config-create">\u65b0\u5efa\u65b0\u9c9c\u4e8b\u7c7b\u578b</a> &nbsp; <a href="/user-apply-list">\u5904\u7406\u7533\u8bf7</a> &nbsp; <a class="reloadtest" href="#nogo">\u6d4b\u8bd5\u73af\u5883\u91cd\u65b0\u52a0\u8f7d</a> &nbsp; <a class="reloaddist hidden" href="#nogo">\u7ebf\u4e0a\u73af\u5883\u91cd\u65b0\u52a0\u8f7d</a></th>\n    </tr>\n  </table>\n</div>\n<div class="user-only hidden">\n  <table width="1200" border="1" class="t1">\n    <tr>\n      <th align="left"><a target="_blank" href="/user-apply">\u7533\u8bf7\u65b0\u9c9c\u4e8b\u521b\u5efa\u53ca\u4fee\u6539</a> &nbsp; <a class="reloadtest" href="#nogo">\u6d4b\u8bd5\u73af\u5883\u91cd\u65b0\u52a0\u8f7d</a></th>\n    </tr>\n  </table>\n</div>\n<br/>\n<table width="1200" border="0">\n  <tr>\n    <th align="left" width="20%">\n      <b style="font-size:120%;">\u65b0\u9c9c\u4e8b\u7c7b\u578b\u5217\u8868\n          <select id="feed-list-filter">\n             <option value="0">\u6240\u6709</option>\n             <option value="1">\u7981\u7528</option>\n             <option value="2">\u6d4b\u8bd5</option>\n             <option value="3">\u7ebf\u4e0a\u6240\u6709</option>\n             <option value="4">\u7ebf\u4e0a\u53ea\u8bfb</option>\n             <option value="5">\u7ebf\u4e0a\u53ef\u53d1\u9001</option>\n          </select></b> &nbsp; &nbsp; \n    </th>\n    <th align="left" width="20%">\n      <a href="/old-feed-list.htm">\u67e5\u770b\u8001\u7248\u672c\u5217\u8868</a>\n    </th>\n    <th align="right" width="60%">\n      <b style="font-size:120%;">\u6ce8\u610f:\u65b0\u9c9c\u4e8b\u6a21\u677f\u66f4\u65b0\u65f6\u95f4\u2014\u2014\u5de5\u4f5c\u65e5\u6bcf\u592916:00</b>&nbsp; &nbsp;\n    </th>\n</tr>\n</table>\n<table id="stype-list-table" width="1200" border="1" class="t1">\n  <tr>\n    <th width="28" class="admin-only hidden" rowspan="2">\u5220\u9664</td>\n    <!-- <th width="25" rowspan="2">\u7c7b\u578b(type)</th> -->\n    <th width="48" rowspan="2">\u5c0f\u7c7b\u578b(stype)<br/></th>\n    <th width="34" rowspan="2">\u6301\u4e45\u5316\u672c\u4f53</th>\n    <th width="34" rowspan="2">\u6301\u4e45\u5316<br/>FeedDB</th>\n    <th colspan="2">\u5408\u5e76\u7b56\u7565</th>\n\n    <th width="150" rowspan="2">\u63a8\u9001\u7b56\u7565</th>\n    <th width="34" rowspan="2">\u6743\u91cd</th>\n    <!-- <th width="40" rowspan="2">\u4fdd\u7559\u65f6\u957f<br />\uff08\u5929\uff09</th> -->\n    <th width="350" rowspan="2">\u7c7b\u578b\u4ecb\u7ecd</th>\n    <th width="50" rowspan="2">\u53ef\u53d1\u9001\u7248\u672c\u53f7</th>\n    <th width="32" rowspan="2">\u64cd\u4f5c</th>\n  </tr>\n  <tr>\n    <th width="30">News</th>\n    <th width="30">Mini</th>\n  </tr>\n</table>\n</div>\n</body>\n\n<script type="text/javascript">\nfunction GetPushHtml(txt, b) {\n  var color = b ? \'green\' : \'red\';\n  if (!b) {\n    return \'\';\n  }\n  return \'<span style="color:\' + color + \';">\' + txt + \'</span> &nbsp; \';\n}\n$(\'a.reloadtest\').click(\n  function() {\n    $.ajax(\'/reloadtest\', {\n      success : function(text){\n        alert(text);\n      },\n      error : function() {\n        alert("\u6d4b\u8bd5\u73af\u5883\u91cd\u65b0\u52a0\u8f7d\u5931\u8d25");\n      }\n    });\n  }\n);\n\n$(\'a.reloaddist\').click(\n  function() {\n    if (!confirm(\'\u8be5\u64cd\u4f5c\u4f1a\u5f71\u54cd\u5230\u7ebf\u4e0a\u670d\u52a1\uff0c\u786e\u5b9a\u7ee7\u7eed\u5417\uff1f\')) {\n      return;\n    }\n    $.ajax(\'/reloaddist\', {\n      success : function(text){\n        alert(text);\n      },\n      error : function() {\n        alert("\u7ebf\u4e0a\u73af\u5883\u91cd\u65b0\u52a0\u8f7d\u5931\u8d25");\n      }\n    });\n  }\n);\n\n$(document).ready(\n  function() {\n    $(\'#feed-list-filter\').val(')
        # SOURCE LINE 119
        __M_writer(escape(list_filter))
        __M_writer(u');\n    $(\'#feed-list-filter\').change(\n      function() {\n        window.location = "/feed-list?filter=" + $(this).val();\n      }\n    );\n    if (g_user_right >= 2) {\n      $(\'.admin-only\').removeClass(\'hidden\');\n      $(\'.admin-only\').attr(\'disabled\', false);\n      if (g_user_right > 2) {\n        $(\'a.reloaddist\').removeClass(\'hidden\');\n      }\n    } else {\n      $(\'.user-only\').removeClass(\'hidden\');\n    }\n    $.ajax(\'/get-stype-list?filter=')
        # SOURCE LINE 134
        __M_writer(escape(list_filter))
        __M_writer(u'\', {\n      \'success\' : function(text){\n        var tv = $.parseJSON(text);\n        var text_yes = \'<span style="color:green;">Yes</span>\';\n        var text_no = \'<span style="color:red;">No</span>\';\n        for(var i = 0; i < tv.length; ++i) {\n          var o = tv[i];\n          var html = \'<tr style="background:\' + (i % 2 ? "#e9edff" : "#f9e9ed") + \'">\'\n                   + (g_user_right >= 2 ? \'<td><a id="remove_stype" href="#nogo">\u5220\u9664</a></td>\' : \'\')\n                   //+ \'<td>\' + (o.stype - o.stype % 100) + \'</td>\'\n                   + \'<td>\' + o.stype  + \'</td>\'\n                   + \'<td>\' + (o.persist_body ? text_yes : text_no) + \'</td>\'\n                   + \'<td>\' + (o.persist_feeddb ? text_yes : text_no) + \'</td>\';\n           if (o.news_merge_type == 1) {\n             html += \'<td>replace</td>\';\n           } else if(o.news_merge_type == 2) {\n             html += \'<td>append</td>\';\n           } else {\n             html += \'<td><span style="color:red;">error</span></td>\';\n           }\n\n           if (o.mini_merge_type == 1) {\n             html += \'<td>replace</td>\';\n           } else if(o.mini_merge_type == 2) {\n             html += \'<td>append</td>\';\n           } else {\n             html += \'<td><span style="color:red;">error</span></td>\';\n           }\n\n           html += \'<td>\'\n                + GetPushHtml(\'Newsfeed\', o.push_feed_flags & F_PUSH_NEWS) \n                + GetPushHtml(\'Minifeed\', o.push_feed_flags & F_PUSH_MINI) \n                + GetPushHtml(\'IM \', o.push_feed_flags & F_PUSH_IM) \n                + GetPushHtml(\'Class \', o.push_feed_flags & F_PUSH_CLASS) \n                + GetPushHtml(\'Minigroup \', o.push_feed_flags & F_PUSH_MINI_GROUP) + \'</td>\';\n\n           html += \'<td>\' + o.weight + \'</td>\';\n           //html += \'<td>\' + o.lifetime + \'</td>\';\n           html += \'<td>\' + o.description + \'</td>\';\n           html += \'<td>\' + (o.dispatching_ver > 0 ? (\'<span style="color:green;">\u7248\u672c \' + o.dispatching_ver + \'</span>\')\n                           : \'<span style="color:red;">\u4e0d\u53ef\u53d1\u9001</span>\')\n                   + \'</td>\';\n           html += \'<td><a href="/feed-config-edit?stype=\' + o.stype + \'">\u7f16\u8f91</a> \'\n                   + \'</td>\';\n           html += \'</tr>\';\n           var node = $(html);\n           $(\'#remove_stype\', node).click(\n             function() {\n               var stype_id = o.stype;\n               return function() {\n                 if (!confirm(\'\u786e\u5b9a\u8981\u5220\u9664\u65b0\u9c9c\u4e8b\u7c7b\u578b \' + stype_id + \' \u5417?\')) {\n                   return;\n                 }\n                 $.ajax(\'/remove-stype?stype_id=\' + stype_id, {\n                   success : function(text) {\n                     alert(text);\n                   },\n                   error : function() {\n                     alert(\'\u5220\u9664\u7c7b\u578b \' + stype_id + \' \u5931\u8d25\');\n                   }\n                 });\n               };\n             }()\n           );\n           $(\'#stype-list-table\').append(node);\n        }\n      },\n      \'error\' : function(){\n        alert(\'\u52a0\u8f7d\u51fa\u9519\');\n      }\n    });\n  }\n);\n</script>\n</html>\n\n')
        return ''
    finally:
        context.caller_stack._pop_frame()


